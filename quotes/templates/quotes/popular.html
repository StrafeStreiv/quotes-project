{% extends 'quotes/base.html' %}

{% block title %}–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã{% endblock %}

{% block content %}
<div class="row">
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç - —Ç–æ–ø —Ü–∏—Ç–∞—Ç -->
    <div class="col-md-8">
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-primary text-white">
                <h2 class="h4 mb-0"> –¢–æ–ø-10 —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ü–∏—Ç–∞—Ç</h2>
            </div>
            <div class="card-body">
                {% if top_quotes %}
                    <div class="list-group">
                        {% for quote in top_quotes %}
                        <div class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h5 class="mb-1">"{{ quote.text }}"</h5>
                                <small class="text-muted">–†–µ–π—Ç–∏–Ω–≥: {{ quote.likes|add:quote.dislikes }}</small>
                            </div>
                            <p class="mb-1"><strong>–ò—Å—Ç–æ—á–Ω–∏–∫:</strong> {{ quote.source }}</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-muted">
                                    üëç {{ quote.likes }} | üëé {{ quote.dislikes }} | üëÄ {{ quote.views }}
                                </small>
                                <small>{{ quote.created_at|date:"d.m.Y" }}</small>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="text-center text-muted">–ü–æ–∫–∞ –Ω–µ—Ç —Ü–∏—Ç–∞—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –≤—ã–±–æ—Ä–∫–∞–º–∏ -->
    <div class="col-md-4">
        <div class="card shadow-sm mb-3">
            <div class="card-header bg-info text-white">
                <h3 class="h6 mb-0"> –°–∞–º—ã–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º—ã–µ</h3>
            </div>
            <div class="card-body">
                {% if most_viewed %}
                    <div class="list-group list-group-flush">
                        {% for quote in most_viewed %}
                        <div class="list-group-item px-0">
                            <small>"{{ quote.text|truncatewords:10 }}"</small>
                            <div class="text-muted">üëÄ {{ quote.views }}</div>
                        </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- –ù–µ–¥–∞–≤–Ω–∏–µ —Ü–∏—Ç–∞—Ç—ã -->
        <div class="card shadow-sm">
            <div class="card-header bg-success text-white">
                <h3 class="h6 mb-0"> –ù–µ–¥–∞–≤–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ</h3>
            </div>
            <div class="card-body">
                {% if recent_quotes %}
                    <div class="list-group list-group-flush">
                        {% for quote in recent_quotes %}
                        <div class="list-group-item px-0">
                            <small>"{{ quote.text|truncatewords:8 }}"</small>
                            <div class="text-muted">{{ quote.created_at|timesince }} –Ω–∞–∑–∞–¥</div>
                        </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}